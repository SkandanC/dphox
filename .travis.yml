sudo: false
language: python
python:
- 3.8
- 3.9
before_install:
- sudo apt-get update
- wget https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh -O miniconda.sh;
- bash miniconda.sh -b -p $HOME/miniconda
- export PATH="$HOME/miniconda/bin:$PATH"
- hash -r
- conda config --set always_yes yes --set changeps1 no
- conda update -q conda
- conda info -a
- conda create -q -n test-environment
- source activate test-environment
- conda install numpy matplotlib
- conda install -c anaconda xarray
- pip install pydantic gdspy trimesh klamath
- conda install shapely descartes
install: pip install codecov && pip install pytest
script: coverage run -m pytest tests
after_success:
- codecov
deploy:
  provider: pypi
  user: __token__
  password:
    secure: kX+rPpV7cC74x3kR5G3nRmNCBoEHJ1g0U1SAFChl1RNkvwJAYekzadTJhobDsedVKstmtcdCJJz0Cof5z0DSamq7oyZ4SOaRLwRbjDT0ghHqjgwfIqRiQoLbhV6fjoIzA+zp0EQBmT8tJtDztLq6vbMT+d7k3jFMxsKYL3c86l3COavGIvztZTszXmafCOPWFwFV+f+YWDPF8lVn3NdnvJ19glJ/ZCd2KwFJR5rnNinRGx6SLL+xIKx2wIY28Ae5lo/lzhcnLuswulWiACrSwTJEK22BaccN53l9Ky03eL1LNuzubHlC1kAJT7jzSuYWGaSI8THYq3xMIKEk08vNL5V2gqZfJk+CeHto7tpTvioQohZ7TIPJciWuHyaKWTKU8hJgv3/7kzz3Jc3dBzDNXny3upRlOFCu0C9SfvPrgEZWlhWHLRjv+ifA7H1MgIpa7p569u72kif10qsy0NLxxppbuY7TVrGCyhaR8NZuEpvrzDkKNnWmGQwp+7Pama5uCGL3gIXp5WRvaKdC2wAo69z3TDCs8T3eL0to4dL095eLPmea1h/pcV7twmI3cuWJacoZzl9rmTKHG3tYfNdd7MK3yJv/vxo41TSwTTVGqvL6j1ezdIeKBKkveTAUAwxY2ws+ueO66DSxWsS7m+JZSxNpBA9Eh7AIw37PzWLnMCU=
  true:
    branch: main
    tags: true
    python:
    - 3.8
    - 3.9
